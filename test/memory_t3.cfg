# memory_t2.cfg
# EXTERNAL Unit test configuration file for Memory service:
# Module output to JobReport
# output to JobReport

process TEST = {
  include "FWCore/Framework/test/cmsExceptionsFatal.cff"
  untracked PSet maxEvents = {untracked int32 input = 40}

  service = SimpleMemoryCheck {
   untracked int32 ignoreTotal = 10
   untracked bool  showMallocInfo = false
   untracked bool  oncePerEventMode = false
  }


  service = MessageLogger {
    
    untracked
    vstring destinations = { "memory_t3_infos"
			   }

    untracked 
    vstring debugModules = { "*" }

    untracked 
    vstring categories = { "preEventProcessing"
    			 , "FwkReport"
    			 , "FwkJob"
			 }

    untracked 
    PSet o1_infos    = { untracked bool noTimeStamps = true  
                              untracked string threshold  = "INFO"    
			      untracked PSet preEventProcessing = { untracked int32 limit    = 0 }
			      untracked PSet FwkReport = { untracked int32 limit    = 0 }
			      untracked PSet FwkJob = { untracked int32 limit    = 0 }
			    }  
  }

#  service = InitRootHandlers
#  {
#    untracked bool UnloadRootSigHandler = false 
#    untracked bool ResetRootErrHandler  = false
#   untracked bool AutoLibraryLoader  = true 
#  }
  include "FWCore/Services/data/InitRootHandlers.cfi"
  
  path p = { module1, module2 ,module3, module4 }

  module module1 = MemoryTestClient_B { 
    untracked int32 pattern = 1
  }

  module module2 = MemoryTestClient_B { 
    untracked int32 pattern = 2
  }

  module module3 = MemoryTestClient_B { 
    untracked int32 pattern = 3
  }

  module module4 = MemoryTestClient_B { 
    untracked int32 pattern = 4
  }

  source = EmptySource { }
}
