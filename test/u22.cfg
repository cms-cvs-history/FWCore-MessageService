# Unit test configuration file for FlushMessageLog in MessageLogger service:
#   Tests effect of LogFlush by cfg-configurable choices of how many 
#   messages to use to clog the queue and whether or not FlushMessageLog
#   is invoked.  Under normal testing, it will invoke FlushMessageLog in
#   a situation where its absence would result in different output.

process TEST = {
  include "FWCore/Framework/test/cmsExceptionsFatal.cff"
  untracked PSet maxEvents = {untracked int32 input = 1}
  service = MessageLogger {
    
    untracked
    vstring destinations = { "u22_warnings"
			   }

    untracked 
    vstring categories = { "preEventProcessing"
    			  ,"FwkJob"
    			 }

    untracked
    PSet default = {
    	untracked  PSet FwkJob = { untracked int32 limit = 0 }
    		   }
    untracked 
    PSet u22_warnings = { untracked bool noTimeStamps = true  
                         untracked string threshold  = "WARNING"
			 untracked PSet preEventProcessing = { untracked int32 limit    = 0 }
			 untracked PSet FwkJob             = { untracked int32 limit    = 0 }
		       }
    
  }

  path p = { sendSomeMessages }

  module sendSomeMessages = UnitTestClient_P 
  { 
    untracked bool  useLogFlush  = true
    untracked int32 queueFillers = 500
  }

  source = EmptySource { }
}
