# Unit test configuration file for MessageLogger service: reportEverys
# testing overall defaults regarding reportEverys
#   overall defaults for all destinations, for unnamed categories                     -- u11_overall_unnamed
#   overall defaults for all destinations, specific category                          -- u11_overall_specific
# testing reportEverys
#   default reportEvery for a destination superceding overall default                       -- u11_supercede_specific   
#   default reportEvery for a destination not superceding specific category overall default -- u11_non_supercede_common
#   reportEvery for specific category superceding both defaults                             -- u11_specific
# In the course of this, these cases also test reportEverys and limits interacting with each other

process TEST = {
  include "FWCore/Framework/test/cmsExceptionsFatal.cff"
  service = MessageLogger {
    
    untracked
    vstring destinations = { "u11_overall_unnamed"
    			   , "u11_overall_specific"
    			   , "u11_supercede_specific"
    			   , "u11_non_supercede_common"
   			   , "u11_specific"
			   }

    untracked vstring categories = { "preEventProcessing"
    				   , "int4bydefault"
    				   , "int7bycommondefault"
    				   , "int25bydefaults"
    				   , "expect_overall_unnamed"
    				   , "expect_overall_specific"
    				   , "expect_supercede_specific"
    				   , "expect_non_supercede_common_specific"
    				   , "expect_specific"
				   , "FwkReport"
				   , "FwkJob"
				   }

    untracked
    PSet default = {  
			untracked PSet FwkReport              		    = { untracked int32 limit = 0 }
			untracked PSet FwkJob              		    = { untracked int32 limit = 0 }
			untracked PSet expect_overall_unnamed               = { untracked int32 limit = 0 }
			untracked PSet expect_overall_specific              = { untracked int32 limit = 0 }
			untracked PSet expect_supercede_specific            = { untracked int32 limit = 0 }
			untracked PSet expect_non_supercede_common_specific = { untracked int32 limit = 0 }
			untracked PSet expect_specific                      = { untracked int32 limit = 0 }
    			untracked int32 reportEvery = 5  
			untracked PSet int7bycommondefault  = { untracked int32 reportEvery = 7  
								untracked int32 limit = -1  }
			untracked PSet int25bydefaults      = { untracked int32 reportEvery = 25 
								untracked int32 limit = -1  }
			untracked PSet FwkJob               = { untracked int32 limit    = 0 }
			untracked bool noTimeStamps = true  
	           }

   untracked
   PSet u11_overall_unnamed = {  
			untracked PSet expect_overall_unnamed = { untracked int32 limit = -1 
								  untracked int32 reportEvery = 1 }
			untracked PSet int4bydefault          = { untracked int32 limit = 0 }
			untracked PSet int7bycommondefault    = { untracked int32 limit = 0}
			untracked PSet int25bydefaults        = { untracked int32 limit = 0}
	           }


   untracked
   PSet u11_overall_specific = {  
			untracked PSet expect_overall_specific = { untracked int32 limit = -1
								   untracked int32 reportEvery = 1 }
			untracked PSet default                = { untracked int32 limit = 0}
			untracked PSet int4bydefault          = { untracked int32 limit = 0 }
			untracked PSet int25bydefaults        = { untracked int32 limit = 0}
	           }
		   
   untracked
   PSet u11_supercede_specific = {  
			untracked PSet expect_supercede_specific = { untracked int32 limit = -1 
								     untracked int32 reportEvery = 1 }
			untracked PSet default                = { untracked int32 limit = 0}
			untracked PSet int7bycommondefault    = { untracked int32 limit = 0 }
			untracked PSet int25bydefaults        = { untracked int32 limit = 0}
			untracked PSet int4bydefault          = { untracked int32 limit = -1
								  untracked int32 reportEvery = 10 }
	           }
		   
   untracked
   PSet u11_non_supercede_common = {  
			untracked PSet expect_non_supercede_common_specific = { untracked int32 limit = -1 
								                untracked int32 reportEvery = 1 }
			untracked PSet int4bydefault          = { untracked int32 limit = 0 }
			untracked PSet int25bydefaults        = { untracked int32 limit = 0}
			untracked PSet default                = { untracked int32 reportEvery = 18 
								  untracked int32 limit = 3 }
	           }
		   
   untracked
   PSet u11_specific = {  
			untracked PSet expect_specific =     { untracked int32 limit = -1 
						               untracked int32 reportEvery = 1 }
			untracked PSet default =             { untracked int32 reportEvery = 30 }
			untracked PSet int4bydefault       = { untracked int32 limit = 0 }
			untracked PSet int7bycommondefault = { untracked int32 limit = 0 }
			untracked PSet int25bydefaults =     { untracked int32 reportEvery = 12 }
			untracked bool noTimeStamps = true  
	           }
		   			    
  }

  include "FWCore/Services/data/InitRootHandlers.cfi"
  
  path p = { sendSomeMessages }

  module sendSomeMessages = UnitTestClient_F { }

  source = EmptySource {untracked int32 maxEvents = 1}
}
